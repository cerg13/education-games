<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–¢–µ—Å—Ç - –û–±—É—á–∞—é—â–∏–µ –ò–≥—Ä—ã</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }
    .test-box {
      background: rgba(255,255,255,0.1);
      border: 2px solid rgba(255,255,255,0.3);
      border-radius: 10px;
      padding: 20px;
      margin: 20px 0;
    }
    .success { border-color: #4ade80; background: rgba(74,222,128,0.2); }
    .error { border-color: #f87171; background: rgba(248,113,113,0.2); }
    button {
      background: #4ade80;
      border: none;
      padding: 15px 30px;
      border-radius: 8px;
      color: white;
      font-size: 16px;
      cursor: pointer;
      margin: 10px 5px;
    }
    button:hover { background: #22c55e; }
    #log {
      background: rgba(0,0,0,0.3);
      padding: 15px;
      border-radius: 8px;
      font-family: monospace;
      max-height: 400px;
      overflow-y: auto;
    }
  </style>
</head>
<body>
  <h1>üîß –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</h1>

  <div class="test-box">
    <h2>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏</h2>
    <p><strong>URL:</strong> <span id="current-url"></span></p>
    <p><strong>API URL:</strong> <span id="api-url"></span></p>
    <p><strong>–ë—Ä–∞—É–∑–µ—Ä:</strong> <span id="browser"></span></p>
  </div>

  <div class="test-box">
    <h2>–¢–µ—Å—Ç—ã</h2>
    <button onclick="testAPI()">‚úÖ –¢–µ—Å—Ç API</button>
    <button onclick="testProfiles()">üë§ –¢–µ—Å—Ç –ø—Ä–æ—Ñ–∏–ª–µ–π</button>
    <button onclick="testReact()">‚öõÔ∏è –¢–µ—Å—Ç React</button>
    <button onclick="window.location.href='/'">üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é</button>
  </div>

  <div class="test-box">
    <h2>–õ–æ–≥</h2>
    <div id="log"></div>
  </div>

  <script>
    const log = document.getElementById('log');

    function addLog(message, isError = false) {
      const time = new Date().toLocaleTimeString();
      const color = isError ? '#f87171' : '#4ade80';
      log.innerHTML += `<div style="color: ${color}">[${time}] ${message}</div>`;
      log.scrollTop = log.scrollHeight;
    }

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
    document.getElementById('current-url').textContent = window.location.href;
    document.getElementById('api-url').textContent = window.location.origin + '/api';
    document.getElementById('browser').textContent = navigator.userAgent;

    addLog('–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');

    async function testAPI() {
      addLog('–ü—Ä–æ–≤–µ—Ä–∫–∞ API...');
      try {
        const response = await fetch('/api/health');
        const data = await response.json();
        addLog('‚úÖ API —Ä–∞–±–æ—Ç–∞–µ—Ç: ' + JSON.stringify(data));
      } catch (error) {
        addLog('‚ùå –û—à–∏–±–∫–∞ API: ' + error.message, true);
      }
    }

    async function testProfiles() {
      addLog('–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª–µ–π...');
      try {
        const response = await fetch('/api/profiles');
        const data = await response.json();
        addLog('‚úÖ –ü—Ä–æ—Ñ–∏–ª–µ–π –Ω–∞–π–¥–µ–Ω–æ: ' + data.length);
        if (data.length > 0) {
          addLog('   –ü—Ä–æ—Ñ–∏–ª—å: ' + data[0].name + ' (' + data[0].character + ')');
        }
      } catch (error) {
        addLog('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ñ–∏–ª–µ–π: ' + error.message, true);
      }
    }

    async function testReact() {
      addLog('–ü—Ä–æ–≤–µ—Ä–∫–∞ React...');
      if (typeof React !== 'undefined') {
        addLog('‚úÖ React –∑–∞–≥—Ä—É–∂–µ–Ω: ' + React.version);
      } else {
        addLog('‚ùå React –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω', true);
      }

      if (typeof ReactDOM !== 'undefined') {
        addLog('‚úÖ ReactDOM –∑–∞–≥—Ä—É–∂–µ–Ω');
      } else {
        addLog('‚ùå ReactDOM –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω', true);
      }

      if (typeof Babel !== 'undefined') {
        addLog('‚úÖ Babel –∑–∞–≥—Ä—É–∂–µ–Ω');
      } else {
        addLog('‚ùå Babel –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω', true);
      }
    }

    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç—ã
    setTimeout(() => {
      testAPI();
      setTimeout(() => {
        testProfiles();
      }, 500);
    }, 1000);
  </script>
</body>
</html>
